# Obsidian Chat View Plus 插件

## 核心目标

- [ ] 将日常所有输出通过"聊天窗口"形式进行记录和展示
- [ ] 平时随意在聊天窗口进行输入、输出，只有在需要整理时才进行后续处理
- [ ] 提供独立的聊天界面：上方为对话记录展示（聊天框），下方为输入框

## 界面布局

### 聊天窗口

- [ ] **右上角按钮下拉列表**
  - [ ] 用于切换预设样式
  - [ ] 下拉列表中可选择绑定的文件（默认当天日记或其他指定文件）

- [ ] **对话气泡展示**
  - [ ] 每条记录以气泡形式展示
  - [ ] 气泡风格可通过设置进行自定义（背景颜色、边框样式等）

- [ ] **字体选择**
  - [ ] 可从插件设置中指定字体或字重、字号等参数

- [ ] **双击修改记录**
  - [ ] 双击某条对话气泡，可编辑：
    - [ ] 内容：文字本体
    - [ ] 时间：弹出日历/时间选择器进行修改
    - [ ] 角色：从下拉列表中选择不同角色

- [ ] **记录操作功能**
  - [ ] 选中记录进行批量操作：
    - [ ] 复制
    - [ ] 批量删除
    - [ ] 其他自定义操作（标记、移动等）

### 输入框

- [ ] **发送按钮**
  - [ ] 点击后将输入内容添加到聊天窗口，并写入指定文件

- [ ] **输入框大小自动适配**
  - [ ] 根据输入内容的多少自动调整高度
  - [ ] 支持手动拖拽或调整框体高度

- [ ] **Emoji 插件集成**
  - [ ] 支持在输入时插入表情符号
  - [ ] 提供可视化的表情选择器

## 文本记录与渲染

- [x] **Obsidian 渲染支持**
  - [x] 修正记录格式及渲染逻辑，使 Obsidian 能正常解析、渲染所有记录

- [ ] **文本记录保证可追溯**
  - [ ] 确保所有聊天记录都能被保存到绑定文件并被正确显示

## 插件设置

### 默认绑定文件

- [ ] **当前选择文件**
  - [ ] 可以临时绑定到任意文件，用于记录当前会话

- [ ] **特定文件**
  - [ ] 固定文件：每次打开插件都写入同一个文件
  - [ ] 固定规则文件（如"当天日记"）：根据日期自动切换到对应的日记文件

### 气泡样式

- [ ] 统一设置聊天气泡的外观（背景色、边框、阴影等）
- [ ] 支持自定义多种主题或风格

### 字体样式（可选）

- [ ] 提供可选的字体列表（系统已安装或自定义字体）
- [ ] 可设置文字大小、行距、颜色等

### 模板设定

- [x] **消息格式模板**
  - [x] 支持不同类型的消息格式：
    - [x] 基本格式：`@left|@right|@center [名称] [时间]`
    - [x] 消息内容：完整的Markdown语法支持
    - [x] 消息分隔符：`___`（三个下划线）
  - [x] 注释类型支持：
    - [x] 时间注释：`[时间] 注释内容`
    - [x] 普通注释：自动居中显示的文本
  - [x] 配置部分支持：
    - [x] 全局设置：`{key=value}` 格式，如 `{header=h3, mw=80}`
    - [x] 角色颜色定义：`[name=color]` 格式，如 `[小明=blue, 小红=red]`

### 角色设定

- [ ] **属性**
  - [ ] 名称：角色名（如"我"、"小明"等）
  - [ ] 站位（左右）：决定在聊天窗口中出现的位置
  - [ ] 颜色：对话气泡或角色名的颜色
  - [ ] 气泡样式：可为角色指定单独的气泡外观
  - [ ] 字体样式：可为角色单独指定字体或大小
  - [ ] 模板：为不同角色定义不同的输出模板
  - [ ] （可选）组别：用于对角色进行分组管理

- [ ] **功能**
  - [ ] 角色的添加、删除及修改
  - [ ] 对已有角色的信息进行变更（调整气泡颜色、姓名等）

### 预设

- [ ] **属性**
  - [ ] 预设名称：例如"工作场景预设""个人日记预设"等
  - [ ] 保存一组角色设定列表：角色名称、样式、模板等一起打包成一个预设

- [ ] **功能**
  - [ ] 保存当前角色配置为预设：一次性保存全部角色的当前状态
  - [ ] 修改预设名称：对已经保存的预设进行重命名
  - [ ] 修改预设中的角色设定：直接编辑该预设下某些角色的配置
  - [ ] 添加新预设：从零创建新的预设
  - [ ] 删除预设：清理不需要的预设 